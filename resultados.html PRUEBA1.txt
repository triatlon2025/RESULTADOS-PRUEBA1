<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Resultados de Carrera</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
</head>
<body>
    <h2>Resultados de Carrera</h2>
    <table id="resultados" class="display" style="width:100%">
        <thead>
            <tr>
                <th>General</th>
                <th>Pos. sexo</th>
                <th>Atleta</th>
                <th>Tiempo Total</th>
                <th>Pedestrismo + T1</th>
                <th>Promedio Pedes + T1</th>
                <th>Ciclismo + T2</th>
                <th>Promedio Ciclis + T2</th>
                <th>Pedestrismo</th>
                <th>Promedio Pedes</th>
                <th>Equipo</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script>
        $(document).ready(function() {
            $.ajax({
                url: './resultados.csv',  // <-- tu archivo CSV
                dataType: 'text',
           success: function(data) {
                let lines = data.split('\n');
                let tableData = [];
                lines.forEach(function(line) {
                    if (line.trim() !== '') {
                        let cols = line.split(';'); // Cambialo a ',' si tu CSV usa comas

                        // ðŸ”§ Solo procesar filas que tengan exactamente 11 columnas
                        if (cols.length === 11) {
                            tableData.push({
                                0: cols[0],
                                1: cols[1],
                                2: cols[2],
                                3: cols[3],
                                4: cols[4],
                                5: cols[5],
                                6: cols[6],
                                7: cols[7],
                                8: cols[8],
                                9: cols[9],
                                10: cols[10]
                            });
                        }
                    }
                });
                $('#resultados').DataTable({
                    data: tableData,
                    columns: [
                        { data: 0 },
                        { data: 1 },
                        { data: 2 },
                        { data: 3 },
                        { data: 4 },
                        { data: 5 },
                        { data: 6 },
                        { data: 7 },
                        { data: 8 },
                        { data: 9 },
                        { data: 10 }
                    ],
                    pageLength: 25,
                    lengthMenu: [[25,50,100],[25,50,100]]
                });
            });
        });
    </script>
</body>
</html>

